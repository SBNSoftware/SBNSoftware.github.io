---
csrf-param: authenticity_token
csrf-token: RnHXAn3v4YztSNtsuPW75Cz1pbh7+KhtgFvvo9NDoevT/qBDh98bPsb23d43nw3CyW337OaG3khl5fx5lvYdPg==
description: Redmine
keywords: issue,bug,tracker
lang: en
title: SPEC Fine-Delay - ICARUS operations - Fermilab Redmine
viewport: width=device-width, initial-scale=1, maximum-scale=1,
  user-scalable=no
---

::: {#wrapper}
::: {.flyout-menu .js-flyout-menu}
::: {.flyout-menu__search}
⚲
:::

::: {.flyout-menu__avatar .flyout-menu__avatar--no-avatar}
[mengel](/redmine/users/3){.user .active}
:::

### Project

[]{.js-project-menu}

### General

[]{.js-general-menu} []{.js-sidebar .flyout-menu__sidebar}

### Profile

[]{.js-profile-menu}
:::

::: {#wrapper2}
::: {#wrapper3}
::: {#top-menu}
::: {#account}
-   [My account](/redmine/my/account){.my-account}
-   [Sign out](/redmine/logout){.logout}
:::

::: {#loggedas}
Logged in as [mengel](/redmine/users/3){.user .active}
:::

-   [Home](/redmine/){.home}
-   [My page](/redmine/my/page){.my-page}
-   [Projects](/redmine/projects){.projects}
-   [Administration](/redmine/admin){.administration}
-   [Help](https://www.redmine.org/guide){.help}
:::

::: {#header}
[](#){.mobile-toggle-button .js-flyout-menu-toggle-button}

::: {#quick-search}
[Search](/redmine/projects/icarus-operations/search):

::: {#project-jump .drdn}
[ICARUS operations]{.drdn-trigger}

::: {.drdn-content}
::: {.quick-search}
:::

::: {.drdn-items .projects .selection}
[[MISER]{style="padding-left:0px;"}](/redmine/projects/miser?jump=wiki "MISER")[[Footprints
Forwarder]{style="padding-left:0px;"}](/redmine/projects/footprints-forwarder?jump=wiki "Footprints Forwarder")[[Offsite
Account
Request]{style="padding-left:0px;"}](/redmine/projects/offsite-acct-req?jump=wiki "Offsite Account Request")[[Service-NOW
SOAP]{style="padding-left:0px;"}](/redmine/projects/servicenow-soap?jump=wiki "Service-NOW SOAP")[[art]{style="padding-left:0px;"}](/redmine/projects/art?jump=wiki "art")[[art_root_io]{style="padding-left:16px;"}](/redmine/projects/art_root_io?jump=wiki "art_root_io")[[Spack
Planning]{style="padding-left:0px;"}](/redmine/projects/spack-planning?jump=wiki "Spack Planning")[[Compute
Services
Tools]{style="padding-left:0px;"}](/redmine/projects/scd-cst?jump=wiki "Compute Services Tools")[[FIFE]{style="padding-left:0px;"}](/redmine/projects/fife?jump=wiki "FIFE")[[HEPCloud
Decision
Engine]{style="padding-left:0px;"}](/redmine/projects/decisionengine?jump=wiki "HEPCloud Decision Engine")[[IFront]{style="padding-left:0px;"}](/redmine/projects/ifront?jump=wiki "IFront")[[JobSub]{style="padding-left:0px;"}](/redmine/projects/jobsub?jump=wiki "JobSub")[[LAr-Continuous-Integration]{style="padding-left:0px;"}](/redmine/projects/lar-ci?jump=wiki "LAr-Continuous-Integration")[[uBooNE
code]{style="padding-left:0px;"}](/redmine/projects/uboonecode?jump=wiki "uBooNE code")[[CC1pi]{style="padding-left:16px;"}](/redmine/projects/cc1pi?jump=wiki "CC1pi")[[UBooNE
alg]{style="padding-left:16px;"}](/redmine/projects/uboonealg?jump=wiki "UBooNE alg")[[uBAna]{style="padding-left:16px;"}](/redmine/projects/ubana?jump=wiki "uBAna")[[uBCRT]{style="padding-left:16px;"}](/redmine/projects/ubcrt?jump=wiki "uBCRT")[[uBCV]{style="padding-left:16px;"}](/redmine/projects/ubcv?jump=wiki "uBCV")[[uBCore]{style="padding-left:16px;"}](/redmine/projects/ubcore?jump=wiki "uBCore")[[uBEvt]{style="padding-left:16px;"}](/redmine/projects/ubevt?jump=wiki "uBEvt")[[uBLite]{style="padding-left:16px;"}](/redmine/projects/ublite?jump=wiki "uBLite")[[uBObj]{style="padding-left:16px;"}](/redmine/projects/ubobj?jump=wiki "uBObj")[[uBRaw]{style="padding-left:16px;"}](/redmine/projects/ubraw?jump=wiki "uBRaw")[[uBReco]{style="padding-left:16px;"}](/redmine/projects/ubreco?jump=wiki "uBReco")[[uBSim]{style="padding-left:16px;"}](/redmine/projects/ubsim?jump=wiki "uBSim")[[uBXSec]{style="padding-left:16px;"}](/redmine/projects/ubxsec?jump=wiki "uBXSec")[[Continuous
Integration
(CI)]{style="padding-left:0px;"}](/redmine/projects/ci?jump=wiki "Continuous Integration (CI)")[[art_ci]{style="padding-left:16px;"}](/redmine/projects/art_ci?jump=wiki "art_ci")[[genie_ci]{style="padding-left:16px;"}](/redmine/projects/genie_ci?jump=wiki "genie_ci")[[glideinwms_ci]{style="padding-left:16px;"}](/redmine/projects/glideinwms_ci?jump=wiki "glideinwms_ci")[[lar_ci]{style="padding-left:16px;"}](/redmine/projects/lar_ci?jump=wiki "lar_ci")[[minerva_ci]{style="padding-left:16px;"}](/redmine/projects/minerva_ci?jump=wiki "minerva_ci")[[nova_ci]{style="padding-left:16px;"}](/redmine/projects/nova_ci?jump=wiki "nova_ci")[[CVDB]{style="padding-left:0px;"}](/redmine/projects/cvdb?jump=wiki "CVDB")[[Data
Analysis as a Service
Musings]{style="padding-left:0px;"}](/redmine/projects/daaas_musings?jump=wiki "Data Analysis as a Service Musings")[[DCAFI]{style="padding-left:0px;"}](/redmine/projects/dcafi?jump=wiki "DCAFI")[[ProtoDUNE
Data
Management]{style="padding-left:0px;"}](/redmine/projects/protodune-data-management?jump=wiki "ProtoDUNE Data Management")[[Fermi
Tape
Tools]{style="padding-left:0px;"}](/redmine/projects/ftt?jump=wiki "Fermi Tape Tools")[[Fermi
Software
Distribution]{style="padding-left:0px;"}](/redmine/projects/fermi-soft-distrib?jump=wiki "Fermi Software Distribution")[[upd]{style="padding-left:16px;"}](/redmine/projects/upd?jump=wiki "upd")[[ups]{style="padding-left:16px;"}](/redmine/projects/ups?jump=wiki "ups")[[Fermi
Redmine]{style="padding-left:0px;"}](/redmine/projects/fermi-redmine?jump=wiki "Fermi Redmine")[[Projects
for Monitoring Redmine
Health]{style="padding-left:16px;"}](/redmine/projects/test-p1?jump=wiki "Projects for Monitoring Redmine Health")[[test-git]{style="padding-left:32px;"}](/redmine/projects/test-git?jump=wiki "test-git")[[test-svn]{style="padding-left:32px;"}](/redmine/projects/test-svn?jump=wiki "test-svn")[[redmine-lib]{style="padding-left:16px;"}](/redmine/projects/redmine-lib?jump=wiki "redmine-lib")[[Jira2Snow]{style="padding-left:0px;"}](/redmine/projects/jira2snow?jump=wiki "Jira2Snow")[[Fifemon]{style="padding-left:0px;"}](/redmine/projects/fifemon?jump=wiki "Fifemon")[[LBNF
Beam
Simulation]{style="padding-left:0px;"}](/redmine/projects/lbne-beamsim?jump=wiki "LBNF Beam Simulation")[[maaws]{style="padding-left:0px;"}](/redmine/projects/maaws?jump=wiki "maaws")[[mediawiki2textile]{style="padding-left:0px;"}](/redmine/projects/mediawiki2textile?jump=wiki "mediawiki2textile")[[MeetingMaker
to
Exchange]{style="padding-left:0px;"}](/redmine/projects/mm-to-ex?jump=wiki "MeetingMaker to Exchange")[[MINERvA]{style="padding-left:0px;"}](/redmine/projects/minerva?jump=wiki "MINERvA")[[MINERvA
Software]{style="padding-left:16px;"}](/redmine/projects/minerva-sw?jump=wiki "MINERvA Software")[[MINERvA
Software
Infrastructure]{style="padding-left:16px;"}](/redmine/projects/mnvsoftinfra?jump=wiki "MINERvA Software Infrastructure")[[PlotUtils
Management]{style="padding-left:16px;"}](/redmine/projects/plotutils-management?jump=wiki "PlotUtils Management")[[Muon
g-2]{style="padding-left:0px;"}](/redmine/projects/g-2?jump=wiki "Muon g-2")[[g-2
TWiki
Conversion]{style="padding-left:16px;"}](/redmine/projects/gm2twikiconv?jump=wiki "g-2 TWiki Conversion")[[gm2aux]{style="padding-left:16px;"}](/redmine/projects/gm2aux?jump=wiki "gm2aux")[[gm2viz]{style="padding-left:16px;"}](/redmine/projects/gm2viz?jump=wiki "gm2viz")[[NOvA-SAM]{style="padding-left:0px;"}](/redmine/projects/nova_sam?jump=wiki "NOvA-SAM")[[NOvA]{style="padding-left:0px;"}](/redmine/projects/nova?jump=wiki "NOvA")[[CHEP
2015
Papers]{style="padding-left:0px;"}](/redmine/projects/nova_chep2015_papers?jump=wiki "CHEP 2015 Papers")[[Production
Operations Management Service
(POMS)]{style="padding-left:0px;"}](/redmine/projects/prod_mgmt_db?jump=wiki "Production Operations Management Service (POMS)")[[Recocert
Framework]{style="padding-left:0px;"}](/redmine/projects/recocert-framework?jump=wiki "Recocert Framework")[[Scientific
Data
Management]{style="padding-left:0px;"}](/redmine/projects/scientific-data-management?jump=wiki "Scientific Data Management")[[REX]{style="padding-left:16px;"}](/redmine/projects/rex?jump=wiki "REX")[[IF
Data Handling Client Tools
(ifdhc)]{style="padding-left:32px;"}](/redmine/projects/ifdhc?jump=wiki "IF Data Handling Client Tools (ifdhc)")[[CPN]{style="padding-left:48px;"}](/redmine/projects/ifdhcpn?jump=wiki "CPN")[[fife_utils]{style="padding-left:48px;"}](/redmine/projects/fife_utils?jump=wiki "fife_utils")[[FIFE
Utils
Demo]{style="padding-left:64px;"}](/redmine/projects/fife-utils-demo?jump=wiki "FIFE Utils Demo")[[IFDH
Art
interface]{style="padding-left:48px;"}](/redmine/projects/ifdh-art?jump=wiki "IFDH Art interface")[[NuConDB-client]{style="padding-left:48px;"}](/redmine/projects/nucondb?jump=wiki "NuConDB-client")[[numsg]{style="padding-left:48px;"}](/redmine/projects/numsg?jump=wiki "numsg")[[REX-Cert-db]{style="padding-left:32px;"}](/redmine/projects/rex-cert-db?jump=wiki "REX-Cert-db")[[REXINT]{style="padding-left:32px;"}](/redmine/projects/rexint?jump=wiki "REXINT")[[SAM]{style="padding-left:16px;"}](/redmine/projects/sam?jump=wiki "SAM")[[SAM-MAIN]{style="padding-left:32px;"}](/redmine/projects/sam-main?jump=wiki "SAM-MAIN")[[Miscellaneous
SAM tools and
scripts]{style="padding-left:48px;"}](/redmine/projects/sam-misc?jump=wiki "Miscellaneous SAM tools and scripts")[[NOVA
SAM
Cookbook]{style="padding-left:48px;"}](/redmine/projects/nova-sam-cookbook?jump=wiki "NOVA SAM Cookbook")[[Fermi
File Transfer
Service]{style="padding-left:48px;"}](/redmine/projects/filetransferservice?jump=wiki "Fermi File Transfer Service")[[SAM
build
util]{style="padding-left:48px;"}](/redmine/projects/sam-util?jump=wiki "SAM build util")[[SAM
C++
servers]{style="padding-left:48px;"}](/redmine/projects/sam-cpp-servers?jump=wiki "SAM C++ servers")[[sam_idl_cpplib]{style="padding-left:64px;"}](/redmine/projects/sam-idl-cpplib?jump=wiki "sam_idl_cpplib")[[sam_lib]{style="padding-left:64px;"}](/redmine/projects/sam-lib?jump=wiki "sam_lib")[[SAM
CORBA DB
server]{style="padding-left:48px;"}](/redmine/projects/sam-python-servers?jump=wiki "SAM CORBA DB server")[[SAM
dataset definition
editor]{style="padding-left:64px;"}](/redmine/projects/sam-def-editor?jump=wiki "SAM dataset definition editor")[[SAM
python
client]{style="padding-left:64px;"}](/redmine/projects/sam-python-client?jump=wiki "SAM python client")[[sam_common_pylib]{style="padding-left:64px;"}](/redmine/projects/sam-common-pylib?jump=wiki "sam_common_pylib")[[sam_idl_pylib]{style="padding-left:64px;"}](/redmine/projects/sam-idl-pylib?jump=wiki "sam_idl_pylib")[[SAM
Dataset
Replicator]{style="padding-left:48px;"}](/redmine/projects/sam_data_replicator?jump=wiki "SAM Dataset Replicator")[[SAM
DDL]{style="padding-left:48px;"}](/redmine/projects/sam-ddl?jump=wiki "SAM DDL")[[SAM
Metrics]{style="padding-left:48px;"}](/redmine/projects/sam-metrics?jump=wiki "SAM Metrics")[[SAM
Oracle
Database]{style="padding-left:48px;"}](/redmine/projects/sam-oracle-db?jump=wiki "SAM Oracle Database")[[SAM
Web
client]{style="padding-left:48px;"}](/redmine/projects/sam-web-client?jump=wiki "SAM Web client")[[SAM
Web
Registry]{style="padding-left:48px;"}](/redmine/projects/sam-web-registry?jump=wiki "SAM Web Registry")[[SAM
Web
services]{style="padding-left:48px;"}](/redmine/projects/sam-web?jump=wiki "SAM Web services")[[Sam_cp
replacement]{style="padding-left:48px;"}](/redmine/projects/sam-cp?jump=wiki "Sam_cp replacement")[[SAM
CORBA
IDL]{style="padding-left:48px;"}](/redmine/projects/sam-idl?jump=wiki "SAM CORBA IDL")[[SAM
station]{style="padding-left:48px;"}](/redmine/projects/sam-station?jump=wiki "SAM station")[[SAM
station
monitor]{style="padding-left:48px;"}](/redmine/projects/sam-station-monitor?jump=wiki "SAM station monitor")[[sam_protobuf]{style="padding-left:48px;"}](/redmine/projects/sam-protobuf?jump=wiki "sam_protobuf")[[XSL
Master
Config]{style="padding-left:48px;"}](/redmine/projects/xsl-master-config?jump=wiki "XSL Master Config")[[Simons
Foundation Data
Management]{style="padding-left:16px;"}](/redmine/projects/simons-dm?jump=wiki "Simons Foundation Data Management")[[Simons-internal]{style="padding-left:32px;"}](/redmine/projects/simons-internal?jump=wiki "Simons-internal")[[LibWDA]{style="padding-left:0px;"}](/redmine/projects/libwda?jump=wiki "LibWDA")[[Scientist
Survey
(Ruby)]{style="padding-left:0px;"}](/redmine/projects/scientist-survey-rub?jump=wiki "Scientist Survey (Ruby)")[[Tester
]{style="padding-left:0px;"}](/redmine/projects/tester?jump=wiki "Tester ")[[Distributed
Computing
Support]{style="padding-left:0px;"}](/redmine/projects/discompsupp?jump=wiki "Distributed Computing Support")[[project-py]{style="padding-left:0px;"}](/redmine/projects/project-py?jump=wiki "project-py")[[Spack
Infrastructure]{style="padding-left:0px;"}](/redmine/projects/spack-infrastructure?jump=wiki "Spack Infrastructure")
:::

::: {.drdn-items .all-projects .selection}
[All Projects](/redmine/projects?jump=wiki)
:::
:::
:::
:::

# [[ICARUS](/redmine/projects/icarus?jump=wiki){.root}[ » ]{.separator}]{.breadcrumbs}[ICARUS operations]{.current-project}

::: {#main-menu .tabs}
-   [+](#){#new-object .new-object}
    -   [New
        issue](/redmine/projects/icarus-operations/issues/new){.new-issue-sub}
    -   [New
        category](/redmine/projects/icarus-operations/issue_categories/new){.new-issue-category}
    -   [New
        version](/redmine/projects/icarus-operations/versions/new){.new-version}
    -   [Log
        time](/redmine/projects/icarus-operations/time_entries/new){.new-timelog}
    -   [Add
        news](/redmine/projects/icarus-operations/news/new){.new-news}
    -   [New
        document](/redmine/projects/icarus-operations/documents/new){.new-document}
    -   [New wiki
        page](/redmine/projects/icarus-operations/wiki/new){.new-wiki-page}
    -   [New
        file](/redmine/projects/icarus-operations/files/new){.new-file}
-   [Overview](/redmine/projects/icarus-operations){.overview}
-   [Activity](/redmine/projects/icarus-operations/activity){.activity}
-   [Issues](/redmine/projects/icarus-operations/issues){.issues}
-   [Spent
    time](/redmine/projects/icarus-operations/time_entries){.time-entries}
-   [Gantt](/redmine/projects/icarus-operations/issues/gantt){.gantt}
-   [Calendar](/redmine/projects/icarus-operations/issues/calendar){.calendar}
-   [News](/redmine/projects/icarus-operations/news){.news}
-   [Documents](/redmine/projects/icarus-operations/documents){.documents}
-   [Wiki](/redmine/projects/icarus-operations/wiki){.wiki .selected}
-   [Files](/redmine/projects/icarus-operations/files){.files}
-   [Repository](/redmine/projects/icarus-operations/repository){.repository}
-   [Settings](/redmine/projects/icarus-operations/settings){.settings}

::: {.tabs-buttons style="display:none;"}
:::
:::
:::

::: {#main}
::: {#sidebar}
### Wiki

-   [Start page](/redmine/projects/icarus-operations/wiki)
-   [Index by title](/redmine/projects/icarus-operations/wiki/index)
-   [Index by date](/redmine/projects/icarus-operations/wiki/date_index)
:::

::: {#content}
::: {.contextual}
[New wiki page](/redmine/projects/icarus-operations/wiki/new){.icon
.icon-add}
[Edit](/redmine/projects/icarus-operations/wiki/SPEC_Fine-Delay/edit){.icon
.icon-edit}
[Watch](/redmine/watchers/watch?object_id=29758&object_type=wiki_page){.wiki_page-29758-watcher
.icon .icon-fav-off}
[Lock](/redmine/projects/icarus-operations/wiki/SPEC_Fine-Delay/protect?protected=1){.icon
.icon-lock}
[Rename](/redmine/projects/icarus-operations/wiki/SPEC_Fine-Delay/rename){.icon
.icon-move}
[Delete](/redmine/projects/icarus-operations/wiki/SPEC_Fine-Delay){.icon
.icon-del}
[History](/redmine/projects/icarus-operations/wiki/SPEC_Fine-Delay/history){.icon
.icon-history}
:::

[White Rabbit system
Wiki](/redmine/projects/icarus-operations/wiki/White_Rabbit_system_Wiki)
»

::: {.wiki .wiki-page}
[]{#SPEC-Fine-Delay}

# SPEC Fine-Delay[¶](#SPEC-Fine-Delay){.wiki-anchor}

The SPEC FineDelay card is mounted on a FMC card in the bach of
sbnd-daq27.fnal.gov

See the FMC FineDelay User\'s Manual for details on gettin/compiling TDC
software and testing\
( \~sbnddaq/Documents/fine-delay-sw-v2014-04.pdf )

a\) get the FineDelay sotware from the CERN ohwr.org repository

git clone
git://ohwr.org/fmc-projects/fmc-delay-1ns-8cha/fine-delay-sw.git\
cd fine-delay-sw\
git submodule update \--init (to gel all dependencies, ZIO and fmc-bus )

a1) download the gateware binary files from the latest release

NOTE: unfortunately the gateware downloaded from the Web DID NOT WORK\
so we contacted the CERN experts and they sent us the latest gateware
file

svec-fine-delay-v2.0-20140331.bin

AND THIS IS THE ONE THAT NEEDS TO BE LOADED INTO THE KERNEL

    2) this   .bin file needs to be copied to /lib/firmware/fmc

~~bash-4.2\$ ls -l /lib/firmware/fmc\
-bash-4.2\$ ls -l /lib/firmware/fmc\
total 18972\
-rw-r\--r-~~ 1 torretta sbnd 1485788 Mar 20 11:09 spec_fdel_wrpc4.bin\
lrwxrwxrwx 1 root root 19 Mar 20 11:11 spec-fine-delay.bin ~~\>
spec_fdel_wrpc4.bin\
-rwxr-xr-x 1 root root 1486064 Feb 17 15:08
spec-fine-delay-v2.0-20140331.bin\
-rw-r\--r-~~ 1 root root 1486616 Jan 27 10:05
spec-fine-delay-v2.1-20141209.bin\
~~rw-r\--r-~~ 1 root sbnd 1484404 Feb 20 15:27 spec-init.bin\
lrwxrwxrwx 1 root root 33 Feb 17 15:08 svec-fine-delay.bin ~~\>
svec-fine-delay-v2.0-20140331.bin\
-rwxr-xr-x 1 root root 3860422 Feb 17 15:08
svec-fine-delay-v2.0-20140331.bin\
-rw-r\--r-~~ 1 root root 3900068 Jan 27 10:05
svec-fine-delay-v2.1-20141209.bin\
~~rw-r\--r-~~ 1 root root 1486064 Jan 24 11:55
wr_spec_tdc_17012017_rc2.bin\
~~rw-r\--r-~~ 1 root root 4223804 Jan 24 11:51
wr_svec_tdc_17012017_rc2.bin\
-bash-4.2\$

b\) compile/make code\
cd \~fine-delay-sw\
ksu\
make prereq_install\
make install

c\) load kernels

ksu\
\[rooot\@sbnd-daq27 \~\]\# modprobe spec\
\[root\@sbnd-daq27 \~\]\# modprobe fmc-fine-delay
gateware=fmc/spec-fine-delay-v2.0-20140331.bin

d\) dmesg (to check that there are no errors):\
\[ 528.305274\] zio-core had been unloaded\
\[ 541.715355\] zio-core had been loaded\
\[ 556.577544\] spec 0000:0c:00.0: probe for device 000c:0000\
\[ 556.649881\] spec 0000:0c:00.0: got file \"fmc/spec-init.bin\",
1484404 (0x16a674) bytes\
\[ 556.841522\] spec 0000:0c:00.0: FPGA programming successful\
\[ 557.189916\] spec 0000:0c:00.0: mezzanine 0\
\[ 557.189997\] Manufacturer: INCAA Computers BV\
\[ 557.190085\] Product name: FmcDelay1ns4cha\
\[ 557.190201\] spec 0000:0c:00.0: Gateware ()\
\[ 557.190272\] spec 0000:0c:00.0: reprogramming with
fmc/spec-fine-delay-v2.0-20140331.bin\
\[ 557.444262\] spec 0000:0c:00.0: FPGA programming successful\
\[ 557.449900\] spec 0000:0c:00.0: Gateware successfully loaded\
\[ 560.241756\] fd fd-0c00: device loaded\
\[ 560.247063\] spec 0000:0c:00.0: Found VIC @ 0x90000\
\[root\@sbnd-daq27 tools\]\#

NOW WE CAN TRY RUNNING SOME SIMPLE CODE provided in the
\~fine-delay-sw/tools directory

e\) cd \~fine-delay-sw/tools

\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\# ./fmc-fdelay-board-time get\
WR Status: disabled.\
Time: 149580.249577728\
\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\# ./fmc-fdelay-board-time wr\
Locking the card to WR: .. locked!\
\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\#\
\[

TO INITIALIZE THE CONNECTION TO THE WR YOu need to run the
\~fine-delay-sw/spec-sw/spec-vusrt.sh code

d\) run the spec-vuart.sh code

    need to find out the WR-Periph-UART and its offset :

\[root\@sbnd-daq27 tools\]\# cat
/sys/kernel/debug/FmcDelay1ns4cha-0c00/dump_sdb\
FMC: 0000:0c:00.0 (SPEC), slot 0, device FmcDelay1ns4cha-0c00\
00000651:e6a542c9 WB4-Crossbar-GSI\
0000ce42:f19ede1a Fine-Delay-Core (00080000-000807ff)\
00000651:eef0b198 WB4-Bridge-GSI (bridge: 000c0000)\
00000651:e6a542c9 WB4-Crossbar-GSI\
0000ce42:66cfeb52 WB4-BlockRAM (000c0000-000d5fff)\
00000651:eef0b198 WB4-Bridge-GSI (bridge: 000e0000)\
00000651:e6a542c9 WB4-Crossbar-GSI\
0000ce42:ab28633a WR-Mini-NIC (000e0000-000e00ff)\
0000ce42:650c2d4f WR-Endpoint (000e0100-000e01ff)\
0000ce42:65158dc0 WR-Soft-PLL (000e0200-000e02ff)\
0000ce42:de0d8ced WR-PPS-Generator (000e0300-000e03ff)\
0000ce42:ff07fc47 WR-Periph-Syscon (000e0400-000e04ff)\
0000ce42:e2d13d04 WR-Periph-UART (000e0500-000e05ff)\
0000ce42:779c5443 WR-Periph-1Wire (000e0600-000e06ff)\
0000ce42:779c5445 WR-Periph-AuxWB (000e0700-000e07ff)\
0000ce42:00000013 WB-VIC-Int.Control (00090000-000900ff)\
Bitstream \'spec-fine-delay\' synthesized 20140326 by twlostow (ISE
version 145), commit a8a78408c341\
Synthesis repository:
git://ohwr.org/fmc-projects/fmc-delay-1ns-8cha.git\
\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\#

LOOK at the line:\
0000ce42:e2d13d04 WR-Periph-UART (000e0500-000e05ff)

    the UART offset for the card is e0500

    f) cd ~fine-delay-sw/spec-sw/tools

ot\@sbnd-daq27 tools\]\# ./spec-vuart -u 0xe0500\
\[press C-a to exit\]\
WR Core: starting up\...\
get_persistent_mac: Using W1 serial number\
ID: cafebabe\
PPSi for WRPC. Commit ppsi-v2013.11.1-1-g76d6d83, built on Mar 12 2014\
t24p read from EEPROM: 2147483647 ps\
Loops per jiffy: 20818\
Locking PLL\
Slave Only, clock class set to 255\
executing: ptp stop\
executing: sfp detech\
executing: sfp match\
Run sfp detect first\
executing: ptp start\
Slave Only, clock class set to 255\
wrc\#\
wrc\#\
wrc\#\
wrc\#\
wrc\#\
wrc\# gui

\[root\@sbnd-daq27 tools\]\# ./fmc-fdelay-status\
Channel 1: disabled\
Channel 2: disabled\
Channel 3: disabled\
Channel 4: disabled\
\[root\@sbnd-daq27 tools\]\# ./fmc-fdelay-pulse ~~h\
./fmc-fdelay-pulse: Use \"./fmc-fdelay-pulse \[-V\] \[-i \<index\>\]
\[-d \<dev\>\] \[\<opts\>\]\
options:\
-o \<output\> ouput channel: 1..4 (default 1)\
-c \<count\> default is 0 and means forever\
-m \<mode\> \"pulse\" (default), \"delay\", \"disable\"\
-r \<reltime\> relative time, e.g. \"10m+20u\" -~~ use m,u,n,p and
add/sub\
~~D \<date\> absolute time, \<secs\>:\<nano\>\
-T \<period\> period, e.g. \"50m-20n\" -~~ use m,u,n,p and add/sub\
-w \<width\> like period; defaults to 50% period\
-t wait for trigger before exiting\
-p pulse per seconds (sets -D -T -w)\
-1 10MHz (sets -D -T -w)\
-v verbose (report action)\
By default, the tool generates a continuous train of pulses (10 Hz
frequency) on a given output.\
\[root\@sbnd-daq27 tools\]\#\
\[r

\[root\@sbnd-daq27 tools\]\# ./fmc-fdelay-pulse ~~o 1 -p -c 0\
Channel 1: pulse generator mode\
start at: 1491397445:000,000,000,000 ps\
pulse width: 0:010,000,000,000 ps\
repeat: infinite\
period: 1:000,000,000,000 ps\
\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\# ./fmc-fdelay-pulse -o 1 -p -c 0\
Channel 1: pulse generator mode\
start at: 1491397445:000,000,000,000 ps\
pulse width: 0:010,000,000,000 ps\
repeat: infinite\
period: 1:000,000,000,000 ps\
\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\# ./fmc-fdelay-pulse -o 2 -p -c 0\
Channel 2: pulse generator mode\
start at: 1491397459:000,000,000,000 ps\
pulse width: 0:010,000,000,000 ps\
repeat: infinite\
period: 1:000,000,000,000 ps\
\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\# ./fmc-fdelay-status\
Channel 1: pulse generator mode (triggered)\
start at: 1491397445:000,000,000,000 ps\
pulse width: 0:010,000,000,000 ps\
repeat: infinite\
period: 1:000,000,000,000 ps\
Channel 2: pulse generator mode (triggered)\
start at: 1491397459:000,000,000,000 ps\
pulse width: 0:010,000,000,000 ps\
repeat: infinite\
period: 1:000,000,000,000 ps\
Channel 3: disabled\
Channel 4: disabled\
\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\# ./fmc-fdelay-status\
Channel 1: disabled\
Channel 2: disabled\
Channel 3: disabled\
Channel 4: disabled\
\[root\@sbnd-daq27 tools\]\# ./fmc-fdelay-pulse -h\
./fmc-fdelay-pulse: Use \"./fmc-fdelay-pulse \[-V\] \[-i \<index\>\]
\[-d \<dev\>\] \[\<opts\>\]\
options:\
-o \<output\> ouput channel: 1..4 (default 1)\
-c \<count\> default is 0 and means forever\
-m \<mode\> \"pulse\" (default), \"delay\", \"disable\"\
-r \<reltime\> relative time, e.g. \"10m+20u\" -~~ use m,u,n,p and
add/sub\
~~D \<date\> absolute time, \<secs\>:\<nano\>\
-T \<period\> period, e.g. \"50m-20n\" -~~ use m,u,n,p and add/sub\
-w \<width\> like period; defaults to 50% period\
-t wait for trigger before exiting\
-p pulse per seconds (sets -D -T -w)\
-1 10MHz (sets -D -T -w)\
-v verbose (report action)\
By default, the tool generates a continuous train of pulses (10 Hz
frequency) on a given output.\
\[root\@sbnd-daq27 tools\]\#\
\[r

\[root\@sbnd-daq27 tools\]\# ./fmc-fdelay-pulse -o 1 -p -c 0\
Channel 1: pulse generator mode\
start at: 1491397445:000,000,000,000 ps\
pulse width: 0:010,000,000,000 ps\
repeat: infinite\
period: 1:000,000,000,000 ps\
\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\# ./fmc-fdelay-pulse -o 2 -p -c 0\
Channel 2: pulse generator mode\
start at: 1491397459:000,000,000,000 ps\
pulse width: 0:010,000,000,000 ps\
repeat: infinite\
period: 1:000,000,000,000 ps\
\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\# ./fmc-fdelay-status\
Channel 1: pulse generator mode (triggered)\
start at: 1491397445:000,000,000,000 ps\
pulse width: 0:010,000,000,000 ps\
repeat: infinite\
period: 1:000,000,000,000 ps\
Channel 2: pulse generator mode (triggered)\
start at: 1491397459:000,000,000,000 ps\
pulse width: 0:010,000,000,000 ps\
repeat: infinite\
period: 1:000,000,000,000 ps\
Channel 3: disabled\
Channel 4: disabled\
\[root\@sbnd-daq27 tools\]\#\
\[root\@sbnd-daq27 tools\]\#
:::

Files (0)

::: {style="display: none;"}
::: {#wiki_add_attachment}
::: {.box}
[ [ ]{.attachments_fields} [ (Maximum size: 400 MB) ]{.add_attachment
style=""} ]{.attachments_form}
:::
:::
:::

Also available in:
[PDF](/redmine/projects/icarus-operations/wiki/SPEC_Fine-Delay.pdf){.pdf}
[HTML](/redmine/projects/icarus-operations/wiki/SPEC_Fine-Delay.html){.html}
[TXT](/redmine/projects/icarus-operations/wiki/SPEC_Fine-Delay.txt){.txt}

::: {style="clear:both;"}
:::
:::
:::
:::

::: {#ajax-indicator style="display:none;"}
Loading\...
:::

::: {#ajax-modal style="display:none;"}
:::

::: {#footer}
::: {.bgl}
::: {.bgr}
Powered by [Redmine](https://www.redmine.org/) © 2006-2019 Jean-Philippe
Lang
:::
:::
:::
:::
:::
